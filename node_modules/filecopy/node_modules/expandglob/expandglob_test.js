/**
 * Testcase for expandglob.js
 * Runs with mocha.
 */

'use strict'

const expandglob = require('./expandglob.js')
const assert = require('assert')

describe('expandglob', () => {

  it('Expand glob filename pattern.', (done) => {
    expandglob(`${__dirname}/**/*.js`, (err, filenames) => {
      assert.ifError(err)
      assert.ok(filenames)
      done()
    })
  })

  it('Expand glob filename pattern with promise.', () => {
    return expandglob(`${__dirname}/**/*.js`).then((filenames) => {
      assert.ok(filenames)
    })
  })

  it('Expand invalid.', (done) => {
    expandglob('__not_existing', (err) => {
      assert.ifError(err)
      expandglob(null, (err) => {
        assert.ifError(err)
        done()
      })
    })
  })

  it('Expand sync.', () => {
    const filenames = expandglob.sync([
      `${__dirname}/*.*`
    ], {})
    assert.ok(filenames.length > 0)
  })
})

/* global describe, before, after, it */
